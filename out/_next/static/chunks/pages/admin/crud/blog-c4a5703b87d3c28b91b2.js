_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{AveT:function(e,t,r){"use strict";var n=r("KQm4"),a=r("rePB"),l=r("q1tI"),o=r.n(l),c=(r("YFqc"),r("nOHt")),s=r("a6RD"),i=r.n(s),u=r("iuBY"),m=r("abxw"),b=r("SMr6"),f=r("zycw"),d=(r("91UR"),r("//g3")),p=o.a.createElement;function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=i()((function(){return Promise.all([r.e(0),r.e(8),r.e(9)]).then(r.t.bind(null,"rmP6",7))}),{ssr:!1,loadableGenerated:{webpack:function(){return["rmP6"]},modules:["react-quill"]}});t.a=Object(c.withRouter)((function(e){var t=e.router,r=Object(l.useState)([]),o=r[0],c=r[1],s=Object(l.useState)([]),i=s[0],g=s[1],v=Object(l.useState)([]),j=v[0],N=v[1],y=Object(l.useState)([]),w=y[0],P=y[1],S=Object(l.useState)(!!localStorage.getItem("blog")&&JSON.parse(localStorage.getItem("blog"))),E=S[0],_=S[1],x=Object(l.useState)({error:"",sizeError:"",success:"",formData:"",title:"",hidePublishButton:!1}),k=x[0],D=x[1],C=k.error,Y=(k.sizeError,k.success),q=k.formData,I=k.title,T=(k.hidePublishButton,Object(u.c)("token"));Object(l.useEffect)((function(){D(h(h({},k),{},{formData:new FormData})),Z(),z()}),[t]);var Z=function(){Object(m.b)().then((function(e){e.error?D(h(h({},k),{},{error:e.error})):c(e)}))},z=function(){Object(b.b)().then((function(e){e.error?D(h(h({},k),{},{error:e.error})):g(e)}))},B=function(e){return function(t){var r,n="photo"===e?t.target.files[0]:t.target.value;q.set(e,n),D(h(h({},k),{},(r={},Object(a.a)(r,e,n),Object(a.a)(r,"formData",q),Object(a.a)(r,"error",""),r)))}},F=function(e){_(e),q.set("body",e),localStorage.setItem("blog",JSON.stringify(e))},H=function(e){return function(){D(h(h({},k),{},{error:""}));var t=j.indexOf(e),r=Object(n.a)(j);-1===t?r.push(e):r.splice(t,1),console.log(r),N(r),q.set("categories",r)}},J=function(e){return function(){D(h(h({},k),{},{error:""}));var t=j.indexOf(e),r=Object(n.a)(w);-1===t?r.push(e):r.splice(t,1),console.log(r),P(r),q.set("tags",r)}};return p("div",{className:"container-fluid pb-5"},p("div",{className:"row"},p("div",{className:"col-md-8"},p("form",{onSubmit:function(e){e.preventDefault(),Object(f.a)(q,T).then((function(e){e.error?D(h(h({},k),{},{error:e.error})):(D(h(h({},k),{},{title:"",error:"",success:'A new blog titled "'.concat(e.title,'" is created')})),_(""),c([]),g([]))}))}},p("div",{className:"form-group"},p("label",{className:"text-muted"},"Title"),p("input",{type:"text",className:"form-control",value:I,onChange:B("title")})),p("div",{className:"form-group"},p(O,{modules:d.b,formats:d.a,value:E,placeholder:"Write something amazing...",onChange:F})),p("div",null,p("button",{type:"submit",className:"btn btn-primary"},"Publish"))),p("div",{className:"pt-3"},p("div",{className:"alert alert-danger",style:{display:C?"":"none"}},C),p("div",{className:"alert alert-success",style:{display:Y?"":"none"}},Y))),p("div",{className:"col-md-4"},p("div",null,p("div",{className:"form-group pb-2"},p("h5",null,"Featured image"),p("hr",null),p("small",{className:"text-muted"},"Max size: 1mb"),p("br",null),p("label",{className:"btn btn-outline-info"},"Upload featured image",p("input",{onChange:B("photo"),type:"file",accept:"image/*",hidden:!0})))),p("div",null,p("h5",null,"Categories"),p("hr",null),p("ul",{style:{maxHeight:"200px",overflowY:"scroll"}},o&&o.map((function(e,t){return p("li",{key:t,className:"list-unstyled"},p("input",{onChange:H(e._id),type:"checkbox",className:"mr-2"}),p("label",{className:"form-check-label"},e.name))})))),p("div",null,p("h5",null,"Tags"),p("hr",null),p("ul",{style:{maxHeight:"200px",overflowY:"scroll"}},i&&i.map((function(e,t){return p("li",{key:t,className:"list-unstyled"},p("input",{onChange:J(e._id),type:"checkbox",className:"mr-2"}),p("label",{className:"form-check-label"},e.name))})))))))}))},MUZa:function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),a=r.n(n),l=r("5Yp1"),o=r("vC6e"),c=r("AveT"),s=(r("YFqc"),a.a.createElement);t.default=function(){return s(l.a,null,s(o.a,null,s("div",{className:"container-fluid"},s("div",{className:"row"},s("div",{className:"col-md-12 pt-5 pb-5"},s("h2",null,"Create a new blog")),s("div",{className:"col-md-12"},s(c.a,null))))))}},eZ7Z:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/crud/blog",function(){return r("MUZa")}])},vC6e:function(e,t,r){"use strict";var n=r("q1tI"),a=r.n(n),l=r("nOHt"),o=r.n(l),c=r("iuBY"),s=a.a.createElement;t.a=function(e){var t=e.children;return Object(n.useEffect)((function(){Object(c.e)()?1!==Object(c.e)().role&&o.a.push("/"):o.a.push("/signin")}),[]),s(a.a.Fragment,null,t)}}},[["eZ7Z",1,0,2,3,7,6]]]);